{"version":3,"sources":["webpack://vcd-node-driver-0.2.2/./machine-config/vcd.vue","webpack://vcd-node-driver-0.2.2/machine-config/vcd.vue","webpack://vcd-node-driver-0.2.2/./machine-config/vcd.vue?0d5e","webpack://vcd-node-driver-0.2.2/./machine-config/vcd.vue?0cdb","webpack://vcd-node-driver-0.2.2/./machine-config/vcd.vue?43f9","webpack://vcd-node-driver-0.2.2/./machine-config/vcd.vue?0ad4","webpack://vcd-node-driver-0.2.2/./vcd.ts","webpack://vcd-node-driver-0.2.2/./machine-config/vcd.vue?4b26"],"names":["render","_vm","this","_c","_self","$fetchState","pending","attrs","_e","errors","length","_l","err","idx","key","stringify","staticClass","_v","authenticating","catalogs","options","enabled","busy","model","value","selected","callback","$$v","$set","expression","catalogitem","orgvdcnetwork","networkadaptertype","vAppVms","operatingSystem","ipaddressallocationmode","storprofile","mode","cpuCount","memorySize","diskSize","sshUser","initData","userData","edgegateway","vdcedgegateway","publicip","insecure","staticRenderFns","initOptions","components","Banner","Loading","LabeledInput","UnitInput","LabeledSelect","Checkbox","mixins","CreateEditView","props","uuid","type","String","required","cluster","Object","default","credentialId","disabled","Boolean","provider","_VIEW","initForViewMode","credential","$store","dispatch","NORMAN","CLOUD_CREDENTIAL","id","e","replace","secret","SECRET","dataPassword","data","password","atob","havePassword","ready","console","error","vcd","Vcd","getToken","then","res","_this$value","_this$value2","_this$value3","_this$value4","$emit","push","name","setOptions","undefined","getCatalog","catalog","getNetwork","getStorage","_this$value5","_this$value6","_this$value7","_this$value8","_this$value9","_this$value10","_this$value11","_this$value12","_this$value13","_this$value14","_this$value15","rke2","watch","$fetch","handler","val","oldVal","_this$value16","getTemplate","getVAppVms","href","osType","getOperatingSystem","hardwareVersionHref","_this$value17","methods","_this$value18","_this$value19","_this$value20","_this$value21","_this$value22","_this$value23","fakeSelectOptions","list","label","syncValue","_this$catalogs$select","_this$catalogitem$sel","_this$orgvdcnetwork$s","_this$storprofile$sel","_this$networkadaptert","_this$ipaddressalloca","sshPort","test","component","content","__esModule","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","constructor","obj","_defineProperty","annotations","keys","forEach","p","split","field","$dispatch","protocolHostname","u","parseUrl","host","getDeepKey","from","selectors","filter","t","reduce","prev","cur","url","headers","Accept","version","btoa","username","org","method","redirectUnauthorized","root","_status","token","_headers","orgId","initial","getOptions","api","path","vm","vmx","section","find","_type","hardwareVersion","os","internalName","mapper","map","k","convertToOptions","found","option","domain","makeComputeRequest","baseUrl","orgVdcReference","sorted","sort","a","b","localeCompare"],"mappings":"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","file":"vcd-node-driver-0.2.2.umd.min.machine-config.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.$fetchState.pending)?_c('Loading',{attrs:{\"delayed\":true}}):_vm._e(),(_vm.errors.length)?_c('div',_vm._l((_vm.errors),function(err,idx){return _c('div',{key:idx},[_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.stringify(err)}})],1)}),0):_vm._e(),_c('div',[_c('div',{staticClass:\"vcd-config\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" vCloud Director Configuration \")]),(_vm.authenticating)?_c('div',{staticClass:\"loading\"},[_c('i',{staticClass:\"icon-spinner icon-spin icon-lg\"}),_c('span',[_vm._v(\" Authenticating with the vCloud Director server ... \")])]):_vm._e()]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"label\":\"Catalog\",\"options\":_vm.catalogs.options,\"disabled\":!_vm.catalogs.enabled || _vm.busy,\"loading\":_vm.catalogs.busy,\"searchable\":false},model:{value:(_vm.catalogs.selected),callback:function ($$v) {_vm.$set(_vm.catalogs, \"selected\", $$v)},expression:\"catalogs.selected\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"label\":\"vApp template\",\"options\":_vm.catalogitem.options,\"disabled\":!_vm.catalogs.enabled && !_vm.catalogitem.enabled,\"loading\":_vm.catalogitem.busy || _vm.catalogs.busy,\"searchable\":false},model:{value:(_vm.catalogitem.selected),callback:function ($$v) {_vm.$set(_vm.catalogitem, \"selected\", $$v)},expression:\"catalogitem.selected\"}})],1)]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"label\":\"Network\",\"options\":_vm.orgvdcnetwork.options,\"disabled\":!_vm.orgvdcnetwork.enabled || _vm.busy,\"loading\":_vm.orgvdcnetwork.busy,\"searchable\":false},model:{value:(_vm.orgvdcnetwork.selected),callback:function ($$v) {_vm.$set(_vm.orgvdcnetwork, \"selected\", $$v)},expression:\"orgvdcnetwork.selected\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"label\":\"Network Adapter\",\"options\":_vm.networkadaptertype.options,\"disabled\":!_vm.catalogitem.enabled && !_vm.networkadaptertype.enabled && !_vm.vAppVms.enabled && !_vm.operatingSystem.enabled,\"loading\":_vm.networkadaptertype.busy || _vm.catalogitem.busy || _vm.vAppVms.busy || _vm.operatingSystem.busy,\"searchable\":false},model:{value:(_vm.networkadaptertype.selected),callback:function ($$v) {_vm.$set(_vm.networkadaptertype, \"selected\", $$v)},expression:\"networkadaptertype.selected\"}})],1)]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"label\":\"IP Address Allocation Mode\",\"options\":_vm.ipaddressallocationmode.options,\"disabled\":_vm.busy,\"searchable\":false},model:{value:(_vm.ipaddressallocationmode.selected),callback:function ($$v) {_vm.$set(_vm.ipaddressallocationmode, \"selected\", $$v)},expression:\"ipaddressallocationmode.selected\"}})],1)]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"label\":\"Storage\",\"options\":_vm.storprofile.options,\"disabled\":!_vm.storprofile.enabled || _vm.busy,\"loading\":_vm.storprofile.busy,\"searchable\":false},model:{value:(_vm.storprofile.selected),callback:function ($$v) {_vm.$set(_vm.storprofile, \"selected\", $$v)},expression:\"storprofile.selected\"}})],1)]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('UnitInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"required\":true,\"output-as\":\"number\",\"label\":\"CPU\",\"suffix\":\"Cores\"},model:{value:(_vm.cpuCount),callback:function ($$v) {_vm.cpuCount=$$v},expression:\"cpuCount\"}})],1)]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('UnitInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"required\":true,\"output-as\":\"number\",\"label\":\"Memory\",\"suffix\":\"MB\"},model:{value:(_vm.memorySize),callback:function ($$v) {_vm.memorySize=$$v},expression:\"memorySize\"}})],1)]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('UnitInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"required\":true,\"output-as\":\"number\",\"label\":\"Disk size\",\"suffix\":\"MB\"},model:{value:(_vm.diskSize),callback:function ($$v) {_vm.diskSize=$$v},expression:\"diskSize\"}})],1)]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"required\":true,\"label\":\"SSH User\"},model:{value:(_vm.sshUser),callback:function ($$v) {_vm.sshUser=$$v},expression:\"sshUser\"}})],1)]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"label\":\"Cloud-init based User data before everything\"},model:{value:(_vm.initData),callback:function ($$v) {_vm.initData=$$v},expression:\"initData\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"label\":\"Cloud-init based User data\"},model:{value:(_vm.userData),callback:function ($$v) {_vm.userData=$$v},expression:\"userData\"}})],1)]),_c('br'),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"label\":\"Edge Gateway (Default is <vdc>)\"},model:{value:(_vm.edgegateway),callback:function ($$v) {_vm.edgegateway=$$v},expression:\"edgegateway\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"label\":\"Virtual Data Center Edge Gateway\"},model:{value:(_vm.vdcedgegateway),callback:function ($$v) {_vm.vdcedgegateway=$$v},expression:\"vdcedgegateway\"}})],1)]),_c('div',{staticClass:\"row mt-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"label\":\"Public IP to use\"},model:{value:(_vm.publicip),callback:function ($$v) {_vm.publicip=$$v},expression:\"publicip\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.busy,\"label\":\"Insecure api\"},model:{value:(_vm.insecure),callback:function ($$v) {_vm.insecure=$$v},expression:\"insecure\"}})],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading';\nimport { Banner } from '@components/Banner';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport UnitInput from '@shell/components/form/UnitInput';\nimport Checkbox from '@components/Form/Checkbox/Checkbox';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { NORMAN, SECRET } from '@shell/config/types';\nimport { stringify } from '@shell/utils/error';\nimport { _VIEW } from '@shell/config/query-params';\nimport { Vcd } from '../vcd.ts';\n\nfunction initOptions() {\n  return {\n    options:  [],\n    selected: null,\n    busy:     false,\n    enabled:  false,\n  };\n}\n\nexport default {\n  components: {\n    Banner, Loading, LabeledInput, UnitInput, LabeledSelect, Checkbox\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    uuid: {\n      type:     String,\n      required: true,\n    },\n\n    cluster: {\n      type:    Object,\n      default: () => ({})\n    },\n\n    credentialId: {\n      type:     String,\n      required: true,\n    },\n\n    disabled: {\n      type:    Boolean,\n      default: false\n    },\n\n    busy: {\n      type:    Boolean,\n      default: false\n    },\n\n    provider: {\n      type:     String,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    this.errors = [];\n    if ( !this.credentialId ) {\n      return;\n    }\n\n    if (this.mode === _VIEW) {\n      this.initForViewMode();\n\n      return;\n    }\n\n    try {\n      this.credential = await this.$store.dispatch('rancher/find', { type: NORMAN.CLOUD_CREDENTIAL, id: this.credentialId });\n    } catch (e) {\n      this.credential = null;\n    }\n\n    // Try and get the secret for the Cloud Credential as we need the plain-text password\n    try {\n      const id = this.credentialId.replace(':', '/');\n      const secret = await this.$store.dispatch('management/find', { type: SECRET, id });\n      const dataPassword = secret.data['vcdcredentialConfig-password'];\n      const password = atob(dataPassword);\n\n      this.password = password;\n      this.havePassword = true;\n      this.ready = true;\n    } catch (e) {\n      // this.credential = null;\n      this.password = '';\n      this.havePassword = false;\n      console.error(e); // eslint-disable-line no-console\n    }\n\n    this.$set(this, 'authenticating', true);\n\n    const vcd = new Vcd(this.$store, this.credential);\n\n    vcd.password = this.password;\n\n    this.vcd = vcd;\n\n    // Fetch a token - if this succeeds, kick off async fetching the lists we need\n    this.vcd.getToken().then((res) => {\n      if (res.error) {\n        this.$set(this, 'authenticating', false);\n        this.$emit('validationChanged', false);\n\n        this.errors.push('Unable to authenticate with the vCloud Director server');\n\n        return;\n      }\n\n      this.$set(this, 'authenticating', false);\n      const ipaddressallocationmode = [{ name: 'NONE' }, { name: 'DHCP' }, { name: 'POOL' }, { name: 'MANUAL' }];\n\n      vcd.setOptions(ipaddressallocationmode, this.ipaddressallocationmode, '', undefined, this.value?.ipaddressallocationmode);\n      vcd.getCatalog(this.catalogs, this.value?.catalog);\n      vcd.getNetwork(this.orgvdcnetwork, this.value?.orgvdcnetwork);\n      vcd.getStorage(this.storprofile, this.value?.storprofile);\n    });\n\n    this.$emit('validationChanged', true);\n  },\n\n  data() {\n    return {\n      authenticating:          false,\n      ready:                   false,\n      vcd:                     null,\n      password:                null,\n      havePassword:            false,\n      operatingSystem:         initOptions(),\n      networkadaptertype:      initOptions(),\n      catalogs:                initOptions(),\n      catalogitem:             initOptions(),\n      orgvdcnetwork:           initOptions(),\n      storprofile:             initOptions(),\n      vAppVms:                 initOptions(),\n      ipaddressallocationmode: initOptions(),\n      memorySize:              this.value?.memorySize || 4096,\n      diskSize:                this.value?.diskSize || 20480,\n      cpuCount:                this.value?.cpuCount || 2,\n      sshUser:                 this.value?.sshUser || 'docker',\n      initData:                this.value?.initData || null,\n      userData:                this.value?.userData || null,\n      edgegateway:             this.value?.edgegateway || null,\n      vdcedgegateway:          this.value?.vdcedgegateway || null,\n      publicip:                this.value?.publicip || null,\n      rke2:                    this.value?.rke2 || true,\n      insecure:                this.value?.insecure || false,\n      errors:                  null,\n    };\n  },\n\n  watch: {\n    'credentialId'() {\n      this.$fetch();\n    },\n    'catalogs.selected': {\n      handler(val, oldVal) {\n        if (val.name === undefined) {\n          return;\n        }\n        this.vcd.getTemplate(this.catalogitem, val.name, this.value?.catalogitem);\n      }\n    },\n    'catalogitem.selected': {\n      handler(val, oldVal) {\n        if (val.name === undefined) {\n          return;\n        }\n        this.vcd.getVAppVms(this.vAppVms, val.href);\n      }\n    },\n    'vAppVms.selected': {\n      handler(val, oldVal) {\n        if (val.osType === undefined) {\n          return;\n        }\n        this.vcd.getOperatingSystem(this.operatingSystem, val.hardwareVersionHref, val.osType);\n      }\n    },\n    'operatingSystem.selected': {\n      handler(val, oldVal) {\n        if (val.name === undefined) {\n          return;\n        }\n        this.vcd.setOptions(val, this.networkadaptertype, 'supportedNICType', undefined, this.value?.networkadaptertype);\n      }\n    }\n  },\n\n  methods: {\n    stringify,\n\n    initForViewMode() {\n      this.fakeSelectOptions(this.catalogs, this.value?.catalog);\n      this.fakeSelectOptions(this.catalogitem, this.value?.catalogitem);\n      this.fakeSelectOptions(this.orgvdcnetwork, this.value?.orgvdcnetwork);\n      this.fakeSelectOptions(this.storprofile, this.value?.storprofile);\n      this.fakeSelectOptions(this.networkadaptertype, this.value?.networkadaptertype);\n      this.fakeSelectOptions(this.ipaddressallocationmode, this.value?.ipaddressallocationmode);\n    },\n\n    fakeSelectOptions(list, value) {\n      list.busy = false;\n      list.enabled = false;\n      list.options = [];\n\n      if (value) {\n        list.options.push({\n          label: value,\n          value,\n        });\n      }\n\n      list.selected = value;\n    },\n\n    syncValue() {\n      // Note: We don't need to provide password as this is picked up via the credential\n\n      // Copy the values from the form to the correct places on the value\n      this.value.catalog = this.catalogs.selected?.name;\n      this.value.catalogitem = this.catalogitem.selected?.name;\n      this.value.orgvdcnetwork = this.orgvdcnetwork.selected?.name;\n      this.value.storprofile = this.storprofile.selected?.name;\n      this.value.networkadaptertype = this.networkadaptertype.selected?.name;\n\n      this.value.ipaddressallocationmode = this.ipaddressallocationmode.selected?.name;\n\n      this.value.cpuCount = this.cpuCount;\n      this.value.memorySize = this.memorySize;\n      this.value.diskSize = this.diskSize;\n\n      this.value.sshUser = this.sshUser;\n      this.value.initData = this.initData;\n      this.value.userData = this.userData;\n      this.value.edgegateway = this.edgegateway;\n      this.value.vdcedgegateway = this.vdcedgegateway;\n      this.value.publicip = this.publicip;\n      this.value.insecure = this.insecure;\n\n      // Not configurable\n      this.value.sshPort = '22';\n      this.value.rke2 = true;\n    },\n\n    test() {\n      this.syncValue();\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <Loading\n      v-if=\"$fetchState.pending\"\n      :delayed=\"true\"\n    />\n    <div v-if=\"errors.length\">\n      <div\n        v-for=\"(err, idx) in errors\"\n        :key=\"idx\"\n      >\n        <Banner\n          color=\"error\"\n          :label=\"stringify(err)\"\n        />\n      </div>\n    </div>\n    <div>\n      <div class=\"vcd-config\">\n        <div class=\"title\">\n          vCloud Director Configuration\n        </div>\n        <div\n          v-if=\"authenticating\"\n          class=\"loading\"\n        >\n          <i class=\"icon-spinner icon-spin icon-lg\" />\n          <span>\n            Authenticating with the vCloud Director server ...\n          </span>\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledSelect\n            v-model=\"catalogs.selected\"\n            label=\"Catalog\"\n            :options=\"catalogs.options\"\n            :disabled=\"!catalogs.enabled || busy\"\n            :loading=\"catalogs.busy\"\n            :searchable=\"false\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledSelect\n            v-model=\"catalogitem.selected\"\n            label=\"vApp template\"\n            :options=\"catalogitem.options\"\n            :disabled=\"!catalogs.enabled && !catalogitem.enabled\"\n            :loading=\"catalogitem.busy || catalogs.busy\"\n            :searchable=\"false\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledSelect\n            v-model=\"orgvdcnetwork.selected\"\n            label=\"Network\"\n            :options=\"orgvdcnetwork.options\"\n            :disabled=\"!orgvdcnetwork.enabled || busy\"\n            :loading=\"orgvdcnetwork.busy\"\n            :searchable=\"false\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledSelect\n            v-model=\"networkadaptertype.selected\"\n            label=\"Network Adapter\"\n            :options=\"networkadaptertype.options\"\n            :disabled=\"!catalogitem.enabled && !networkadaptertype.enabled && !vAppVms.enabled && !operatingSystem.enabled\"\n            :loading=\"networkadaptertype.busy || catalogitem.busy || vAppVms.busy || operatingSystem.busy\"\n            :searchable=\"false\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledSelect\n            v-model=\"ipaddressallocationmode.selected\"\n            label=\"IP Address Allocation Mode\"\n            :options=\"ipaddressallocationmode.options\"\n            :disabled=\"busy\"\n            :searchable=\"false\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledSelect\n            v-model=\"storprofile.selected\"\n            label=\"Storage\"\n            :options=\"storprofile.options\"\n            :disabled=\"!storprofile.enabled || busy\"\n            :loading=\"storprofile.busy\"\n            :searchable=\"false\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <UnitInput\n            v-model=\"cpuCount\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            :required=\"true\"\n            output-as=\"number\"\n            label=\"CPU\"\n            suffix=\"Cores\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <UnitInput\n            v-model=\"memorySize\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            :required=\"true\"\n            output-as=\"number\"\n            label=\"Memory\"\n            suffix=\"MB\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <UnitInput\n            v-model=\"diskSize\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            :required=\"true\"\n            output-as=\"number\"\n            label=\"Disk size\"\n            suffix=\"MB\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"sshUser\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            :required=\"true\"\n            label=\"SSH User\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"initData\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            label=\"Cloud-init based User data before everything\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"userData\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            label=\"Cloud-init based User data\"\n          />\n        </div>\n      </div>\n      <br/>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"edgegateway\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            label=\"Edge Gateway (Default is <vdc>)\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"vdcedgegateway\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            label=\"Virtual Data Center Edge Gateway\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-10\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"publicip\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            label=\"Public IP to use\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <Checkbox\n            v-model=\"insecure\"\n            :mode=\"mode\"\n            :disabled=\"busy\"\n            label=\"Insecure api\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped lang=\"scss\">\n  .file-button {\n    align-items: center;\n    position: absolute;\n    top: 0;\n    right: 0;\n    height: 100%;\n    display: flex;\n\n    > .file-selector {\n      height: calc($input-height - 2px);\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n    }\n  }\n\n  .vcd-config {\n    display: flex;\n    align-items: center;\n\n    > .title {\n      font-weight: bold;\n      padding: 4px 0;\n    }\n\n    > .loading {\n      margin-left: 20px;\n      display: flex;\n      align-items: center;\n\n      > i {\n        margin-right: 4px;;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./vcd.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./vcd.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./vcd.vue?vue&type=template&id=2e38f958&scoped=true\"\nimport script from \"./vcd.vue?vue&type=script&lang=js\"\nexport * from \"./vcd.vue?vue&type=script&lang=js\"\nimport style0 from \"./vcd.vue?vue&type=style&index=0&id=2e38f958&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e38f958\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./vcd.vue?vue&type=style&index=0&id=2e38f958&prod&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"a0e8f538\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".file-button[data-v-2e38f958]{align-items:center;position:absolute;top:0;right:0;height:100%;display:flex}.file-button>.file-selector[data-v-2e38f958]{height:59px;border-top-left-radius:0;border-bottom-left-radius:0}.vcd-config[data-v-2e38f958]{display:flex;align-items:center}.vcd-config>.title[data-v-2e38f958]{font-weight:700;padding:4px 0}.vcd-config>.loading[data-v-2e38f958]{margin-left:20px;display:flex;align-items:center}.vcd-config>.loading>i[data-v-2e38f958]{margin-right:4px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/**\n * Helper class for dealing with the vCloud Director API\n */\n\nimport { parse as parseUrl } from '@shell/utils/url';\n\nexport class Vcd {\n    public href: string = '';\n    public username: string = '';\n    public password: string = '';\n    public org: string = '';\n    public orgId: string = '';\n    public version: string = '36.0';\n    public vdc: string = '';\n    public token: string = '';\n\n    private $dispatch: any;\n\n    constructor($store: any, obj: any) {\n      if (obj.annotations) {\n        Object.keys(obj.annotations).forEach((key) => {\n          const p = key.split('/');\n\n          if (p.length === 2 && p[0] === 'vcd.cattle.io') {\n            const field = p[1];\n\n            (this as any)[field] = obj.annotations[key];\n          }\n        });\n      } else {\n        // Copy from options to this\n        Object.keys(obj).forEach((key) => {\n          (this as any)[key] = obj[key];\n        });\n      }\n\n      this.$dispatch = $store.dispatch;\n    }\n\n    public protocolHostname(href: string) {\n      const u = parseUrl(href);\n      return u?.host || '';\n    }\n\n    public getDeepKey(from: any, selectors: string) {\n      return selectors.replace(/\\[([^\\[\\]]*)\\]/g, '.$1.')\n        .split('.')\n        .filter(t => t !== '')\n        .reduce((prev, cur) => prev && prev[cur], from)\n    }\n\n    public async getToken() {\n      const url = `/meta/proxy/${ this.protocolHostname(this.href) }/cloudapi/1.0.0/sessions`;\n\n      const headers = { \n        Accept: 'application/*;version=' + this.version,\n        'X-API-Auth-Header': 'Basic ' + btoa(this.username + '@' + this.org + ':' + this.password)\n      };\n\n      try {\n        const res = await this.$dispatch('management/request', {\n          url,\n          headers,\n          method:               'POST',\n          redirectUnauthorized: false\n        }, { root: true });\n\n        if (res._status === 502) {\n          return { error: 'Could not proxy request - URL may not be in Rancher\\'s allow list' };\n        }\n\n        const token = res._headers['x-vmware-vcloud-access-token'];\n\n        this.token = token;\n\n        this.orgId = res.org.id.replace(/^urn:vcloud:org:/, '');\n\n        return res;\n      } catch (e) {\n        console.error(e); // eslint-disable-line no-console\n\n        return { error: e };\n      }\n    }\n\n    public async getCatalog(value: any, initial?: string) {\n      return await this.getOptions(value, '/query?type=catalog&pageSize=1000', 'record', undefined, initial);\n    }\n\n    public async getTemplate(value: any, catalog: string, initial?: string) {\n      return await this.getOptions(value, `/query?type=vAppTemplate&pageSize=1000&filter=(catalogName==${ catalog })`, 'record', undefined, initial);\n    }\n\n    public async getNetwork(value: any, initial?: string) {\n      return await this.getOptions(value, `/cloudapi/1.0.0/orgVdcNetworks?filterEncoded=true&pageSize=1000&filter=((crossVdcNetworkId==null))`, 'values', undefined, initial, true);\n    }\n\n    public async getStorage(value: any, initial?: string) {\n      return await this.getOptions(value, '/query?type=orgVdcStorageProfile&pageSize=1000', 'record', undefined, initial);\n    }\n\n    public async getVAppVms(value: any, api: string, initial?: string) {\n      return await this.getOptions(value, parseUrl(api).path.replace(/^\\/api/, ''), 'children.vm', (vm: any) => {\n        const vmx = vm.section.find((section: any)=> section._type === 'VmSpecSectionType');\n\n        return {\n          ...vm,\n          osType:              vmx.osType,\n          hardwareVersionHref: vmx.hardwareVersion.href\n        };\n      }, initial);\n    }\n\n    public async getOperatingSystem(value: any, api: string, initial?: string) {\n      return await this.getOptions(value, parseUrl(api).path.replace(/^\\/api/, ''), 'supportedOperatingSystems.operatingSystemFamilyInfo[1].operatingSystem', (os: any) => {\n        return {\n          ...os,\n          name: os.internalName\n        };\n      }, initial);\n    }\n\n    public setOptions(res: any, value: any, field: string, mapper?: Function, initial?: string) {\n      if (res) {\n        let list = this.getDeepKey(res, field) || [];\n\n        if (mapper) {\n          list = list.map((k: any) => mapper(k));\n        }\n\n        value.options = this.convertToOptions(list);\n        value.busy = false;\n\n        if (initial) {\n          const found = value.options.find((option: any) => option.value.name === initial);\n\n          if (found) {\n            value.selected = found.value;\n          }\n        }\n\n        if (!value.selected && value.options.length > 0) {\n          value.selected = value.options[0].value;\n        }\n      } else {\n        value.options = [];\n        value.selected = null;\n        value.busy = false;\n        value.enabled = false;\n      }\n    }\n\n    public async getOptions(value: any, api: string, field: string, mapper?: Function, initial?: string, domain?: boolean) {\n      // We are fetching the data for the options\n      value.busy = true;\n      value.enabled = true;\n      value.selected = '';\n\n      const res = await this.makeComputeRequest(api, domain);\n\n      this.setOptions(res, value, field, mapper, initial);\n    }\n\n    public async makeComputeRequest(api: string, domain?: boolean) {\n      const href = domain ? parseUrl(this.href).host : this.href.replace(/^https?:\\/\\//, '');\n\n      const baseUrl = `/meta/proxy/${ href }`;\n      const url = `${ baseUrl }${ api }`;\n\n      const headers = domain ? {\n        Accept:        'application/json;multisite=global;version=' + this.version,\n        'X-API-Auth-Header': 'Bearer ' + this.token\n      } : {\n        Accept:        'application/*+json;version=' + this.version,\n        'X-API-Auth-Header': 'Bearer ' + this.token\n      };\n\n      try {\n        const res = await this.$dispatch('management/request', {\n          url,\n          headers,\n          method:               'GET',\n          redirectUnauthorized: false,\n        }, { root: true });\n\n        return res;\n      } catch (e) {\n        console.error(e); // eslint-disable-line no-console\n      }\n    }\n\n    public async getVdcs() {\n      const href = this.href.replace(/^https?:\\/\\//, '');\n      const baseUrl = `/meta/proxy/${ href }`;\n\n      const headers = {\n        Accept:        'application/*+json;version=' + this.version,\n        'X-API-Auth-Header': 'Bearer ' + this.token\n      };\n\n      try {\n        const res = await this.$dispatch('management/request', {\n          url:                  `${ baseUrl }/org/${ this.orgId }/vdcRollup`,\n          headers,\n          method:               'GET',\n          redirectUnauthorized: false,\n        }, { root: true });\n        \n        return res?.orgVdcReference;\n      } catch (e) {\n        console.error(e); // eslint-disable-line no-console\n\n        return { error: e };\n      }\n    }\n\n    private convertToOptions(list: any) {\n      const sorted = (list || []).sort((a: any, b: any) => a.name.localeCompare(b.name));\n\n      return sorted.map((p: any) => {\n        return {\n          label: p.name,\n          value: p\n        };\n      });\n    }\n}","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./vcd.vue?vue&type=style&index=0&id=2e38f958&prod&scoped=true&lang=scss\""],"sourceRoot":""}