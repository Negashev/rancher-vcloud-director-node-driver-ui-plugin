{"version":3,"sources":["webpack://vcd-node-driver-0.4.0/./components/BusyButton.vue?ee58","webpack://vcd-node-driver-0.4.0/./cloud-credential/vcd.vue?6532","webpack://vcd-node-driver-0.4.0/./vcd.ts","webpack://vcd-node-driver-0.4.0/./components/BusyButton.vue?ef99","webpack://vcd-node-driver-0.4.0/./cloud-credential/vcd.vue","webpack://vcd-node-driver-0.4.0/./components/BusyButton.vue","webpack://vcd-node-driver-0.4.0/./components/BusyButton.vue?2974","webpack://vcd-node-driver-0.4.0/./components/BusyButton.vue?b3f6","webpack://vcd-node-driver-0.4.0/./components/BusyButton.vue?3c28","webpack://vcd-node-driver-0.4.0/cloud-credential/vcd.vue","webpack://vcd-node-driver-0.4.0/./cloud-credential/vcd.vue?b6c4","webpack://vcd-node-driver-0.4.0/./cloud-credential/vcd.vue?0758","webpack://vcd-node-driver-0.4.0/./cloud-credential/vcd.vue?e952","webpack://vcd-node-driver-0.4.0/./components/BusyButton.vue?5a9b","webpack://vcd-node-driver-0.4.0/./cloud-credential/vcd.vue?1094"],"names":["content","__esModule","default","module","i","locals","exports","add","Vcd","constructor","$store","obj","_defineProperty","annotations","Object","keys","forEach","key","p","split","length","field","this","$dispatch","dispatch","protocolHostname","href","u","parseUrl","host","getDeepKey","from","selectors","replace","filter","t","reduce","prev","cur","url","headers","Accept","version","btoa","username","org","password","res","method","redirectUnauthorized","root","_status","error","token","_headers","orgId","id","e","console","value","initial","getOptions","undefined","catalog","storage","vdcName","vdc","api","path","vm","vmx","section","find","_type","osType","hardwareVersionHref","hardwareVersion","os","name","internalName","setOptions","mapper","list","map","k","options","convertToOptions","busy","found","option","selected","enabled","domain","_res","loopPages","makeComputeRequest","totalResults","page","pageCount","_res2","_res3","concat","baseUrl","orgVdcReference","record","sorted","sort","a","b","localeCompare","item","label","___CSS_LOADER_API_IMPORT___","push","render","_vm","_c","_self","staticClass","attrs","decodedData","step","mode","on","$event","setData","ref","canAuthenticate","connect","clear","_v","_s","_e","errorAllowHost","hostname","allowBusy","addHostToAllowList","vdcs","vdcOptions","model","callback","$$v","expression","vappNamesOptions","vappName","staticRenderFns","_setupProxy","disabled","tabIndex","componentTestid","clicked","displayLabel","Vue","extend","props","type","String","labelKey","Boolean","Number","manual","data","computed","getters","methods","stopPropagation","preventDefault","cb","$set","$emit","focus","$refs","btn","component","components","Banner","BusyButton","LabeledInput","LabeledSelect","required","driver","_CREATE","vappNames","_this$value","_this$value2","_this$value3","_this$value4","created","test","hostInAllowList","_this$driver","_this$driver2","whitelistDomains","includes","save","$el","click","_this$vdcOptions$","_this$vappNamesOption","okay","vcd","getToken","message","getVdcs","getVApps"],"mappings":"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","file":"vcd-node-driver-0.4.0.umd.min.cloud-credential.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BusyButton.vue?vue&type=style&index=0&id=0842832c&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7f3a7c02\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./vcd.vue?vue&type=style&index=0&id=650d9e53&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"114c404c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","/**\n * Helper class for dealing with the vCloud Director API\n */\n\nimport { parse as parseUrl } from '@shell/utils/url';\n\nexport class Vcd {\n    public href: string = '';\n    public username: string = '';\n    public password: string = '';\n    public org: string = '';\n    public orgId: string = '';\n    public version: string = '36.0';\n    public vdc: string = '';\n    public vappName: string = '';\n    public token: string = '';\n\n    private $dispatch: any;\n\n    constructor($store: any, obj: any) {\n      if (obj.annotations) {\n        Object.keys(obj.annotations).forEach((key) => {\n          const p = key.split('/');\n\n          if (p.length === 2 && p[0] === 'vcd.cattle.io') {\n            const field = p[1];\n\n            (this as any)[field] = obj.annotations[key];\n          }\n        });\n      } else {\n        // Copy from options to this\n        Object.keys(obj).forEach((key) => {\n          (this as any)[key] = obj[key];\n        });\n      }\n\n      this.$dispatch = $store.dispatch;\n    }\n\n    public protocolHostname(href: string) {\n      const u = parseUrl(href);\n\n      return u?.host || '';\n    }\n\n    public getDeepKey(from: any, selectors: string) {\n      return selectors.replace(/\\[([^\\[\\]]*)\\]/g, '.$1.')\n        .split('.')\n        .filter(t => t !== '')\n        .reduce((prev, cur) => prev && prev[cur], from);\n    }\n\n    public async getToken() {\n      const url = `/meta/proxy/${ this.protocolHostname(this.href) }/cloudapi/1.0.0/sessions`;\n\n      const headers = {\n        Accept:              `application/*;version=${ this.version }`,\n        'X-API-Auth-Header': `Basic ${ btoa(`${ this.username }@${ this.org }:${ this.password }`) }`\n      };\n\n      try {\n        const res = await this.$dispatch('management/request', {\n          url,\n          headers,\n          method:               'POST',\n          redirectUnauthorized: false\n        }, { root: true });\n\n        if (res._status === 502) {\n          return { error: 'Could not proxy request - URL may not be in Rancher\\'s allow list' };\n        }\n\n        const token = res._headers['x-vmware-vcloud-access-token'];\n\n        this.token = token;\n\n        this.orgId = res.org.id.replace(/^urn:vcloud:org:/, '');\n\n        return res;\n      } catch (e) {\n        console.error(e); // eslint-disable-line no-console\n\n        return { error: e };\n      }\n    }\n\n    public async getCatalog(value: any, initial?: string) {\n      return await this.getOptions(value, '/query?type=catalog&pageSize=1000', 'record', undefined, initial);\n    }\n\n    public async getTemplate(value: any, catalog: string, initial?: string) {\n      return await this.getOptions(value, `/query?type=vAppTemplate&pageSize=1000&filter=(catalogName==${ catalog })`, 'record', undefined, initial);\n    }\n\n    public async getNetwork(value: any, initial?: string) {\n      return await this.getOptions(value, `/cloudapi/1.0.0/orgVdcNetworks?filterEncoded=true&pageSize=20&filter=((crossVdcNetworkId==null))`, 'values', undefined, initial, true);\n    }\n\n    public async getStorage(value: any, initial?: string) {\n      return await this.getOptions(value, '/query?type=orgVdcStorageProfile&pageSize=1000', 'record', (storage: any) => {\n        if (storage.vdcName === this.vdc) {\n          return storage;\n        }\n      }, initial);\n    }\n\n    public async getVAppVms(value: any, api: string, initial?: string) {\n      return await this.getOptions(value, parseUrl(api).path.replace(/^\\/api/, ''), 'children.vm', (vm: any) => {\n        const vmx = vm.section.find((section: any) => section._type === 'VmSpecSectionType');\n\n        return {\n          ...vm,\n          osType:              vmx.osType,\n          hardwareVersionHref: vmx.hardwareVersion.href\n        };\n      }, initial);\n    }\n\n    public async getOperatingSystem(value: any, api: string, initial?: string) {\n      return await this.getOptions(value, parseUrl(api).path.replace(/^\\/api/, ''), 'supportedOperatingSystems.operatingSystemFamilyInfo[1].operatingSystem', (os: any) => {\n        return {\n          ...os,\n          name: os.internalName\n        };\n      }, initial);\n    }\n\n    public setOptions(res: any, value: any, field: string, mapper?: Function, initial?: string) {\n      if (res) {\n        let list = this.getDeepKey(res, field) || [];\n\n        if (mapper) {\n          list = list.map((k: any) => mapper(k));\n        }\n\n        value.options = this.convertToOptions(list);\n        value.busy = false;\n\n        if (initial) {\n          const found = value.options.find((option: any) => option.value.name === initial);\n\n          if (found) {\n            value.selected = found.value;\n          }\n        }\n\n        if (!value.selected && value.options.length > 0) {\n          value.selected = value.options[0].value;\n        }\n      } else {\n        value.options = [];\n        value.selected = null;\n        value.busy = false;\n        value.enabled = false;\n      }\n    }\n\n    public async getOptions(value: any, api: string, field: string, mapper?: Function, initial?: string, domain?: boolean) {\n      // We are fetching the data for the options\n      value.busy = true;\n      value.enabled = true;\n      value.selected = '';\n\n      let loopPages = true;\n\n      let res = await this.makeComputeRequest(api, domain);\n      const totalResults = res;\n      let page = 1;\n\n      if (res?.pageCount) {\n        while (loopPages) {\n          if (res?.pageCount > res?.page) {\n            page = res.page + 1;\n            res = await this.makeComputeRequest(`${ api }&page=${ page }`, domain);\n            totalResults[field] = totalResults[field].concat(res[field]);\n          } else {\n            loopPages = false;\n          }\n        }\n      }\n\n      this.setOptions(totalResults, value, field, mapper, initial);\n    }\n\n    public async makeComputeRequest(api: string, domain?: boolean) {\n      const href = domain ? parseUrl(this.href).host : this.href.replace(/^https?:\\/\\//, '');\n\n      const baseUrl = `/meta/proxy/${ href }`;\n      const url = `${ baseUrl }${ api }`;\n\n      const headers = domain ? {\n        Accept:              `application/json;multisite=global;version=${ this.version }`,\n        'X-API-Auth-Header': `Bearer ${ this.token }`\n      } : {\n        Accept:              `application/*+json;version=${ this.version }`,\n        'X-API-Auth-Header': `Bearer ${ this.token }`\n      };\n\n      try {\n        const res = await this.$dispatch('management/request', {\n          url,\n          headers,\n          method:               'GET',\n          redirectUnauthorized: false,\n        }, { root: true });\n\n        return res;\n      } catch (e) {\n        console.error(e); // eslint-disable-line no-console\n      }\n    }\n\n    public async getVdcs() {\n      const href = this.href.replace(/^https?:\\/\\//, '');\n      const baseUrl = `/meta/proxy/${ href }`;\n\n      const headers = {\n        Accept:              `application/*+json;version=${ this.version }`,\n        'X-API-Auth-Header': `Bearer ${ this.token }`\n      };\n\n      try {\n        const res = await this.$dispatch('management/request', {\n          url:                  `${ baseUrl }/org/${ this.orgId }/vdcRollup`,\n          headers,\n          method:               'GET',\n          redirectUnauthorized: false,\n        }, { root: true });\n\n        return res?.orgVdcReference;\n      } catch (e) {\n        console.error(e); // eslint-disable-line no-console\n\n        return { error: e };\n      }\n    }\n\n    public async getVApps() {\n      const href = this.href.replace(/^https?:\\/\\//, '');\n      const baseUrl = `/meta/proxy/${ href }`;\n\n      const headers = {\n        Accept:              `application/*+json;version=${ this.version }`,\n        'X-API-Auth-Header': `Bearer ${ this.token }`\n      };\n\n      try {\n        const res = await this.$dispatch('management/request', {\n          url:                  `${ baseUrl }/query?type=vApp&pageSize=1000`,\n          headers,\n          method:               'GET',\n          redirectUnauthorized: false,\n        }, { root: true });\n\n        return res?.record;\n      } catch (e) {\n        console.error(e); // eslint-disable-line no-console\n\n        return { error: e };\n      }\n    }\n\n    private convertToOptions(list: any) {\n      let sorted = (list || []).sort((a: any, b: any) => a.name.localeCompare(b.name));\n\n      sorted = sorted.filter((item: undefined) => item !== undefined);\n\n      return sorted.map((p: any) => {\n        return {\n          label: p.name,\n          value: p\n        };\n      });\n    }\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".icon-spacer[data-v-0842832c]{width:24px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"value\":_vm.value.decodedData.href,\"disabled\":_vm.step !== 1,\"label-key\":\"driver.vcd.auth.fields.href\",\"placeholder-key\":\"driver.vcd.auth.placeholders.href\",\"type\":\"text\",\"mode\":_vm.mode},on:{\"input\":function($event){return _vm.value.setData('href', $event);}}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"value\":_vm.value.decodedData.org,\"disabled\":_vm.step !== 1,\"label-key\":\"driver.vcd.auth.fields.org\",\"placeholder-key\":\"driver.vcd.auth.placeholders.org\",\"type\":\"text\",\"mode\":_vm.mode},on:{\"input\":function($event){return _vm.value.setData('org', $event);}}})],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{staticClass:\"mt-20\",attrs:{\"value\":_vm.value.decodedData.username,\"disabled\":_vm.step !== 1,\"label-key\":\"driver.vcd.auth.fields.username\",\"placeholder-key\":\"driver.vcd.auth.placeholders.username\",\"type\":\"text\",\"mode\":_vm.mode},on:{\"input\":function($event){return _vm.value.setData('username', $event);}}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{staticClass:\"mt-20\",attrs:{\"value\":_vm.value.decodedData.password,\"disabled\":_vm.step !== 1,\"label-key\":\"driver.vcd.auth.fields.password\",\"placeholder-key\":\"driver.vcd.auth.placeholders.password\",\"type\":\"password\",\"mode\":_vm.mode},on:{\"input\":function($event){return _vm.value.setData('password', $event);}}})],1)]),_c('BusyButton',{ref:\"connect\",staticClass:\"mt-20\",attrs:{\"label-key\":\"driver.vcd.auth.actions.authenticate\",\"disabled\":_vm.step !== 1 || !_vm.canAuthenticate},on:{\"click\":_vm.connect}}),_c('button',{staticClass:\"btn role-primary mt-20 ml-20\",attrs:{\"disabled\":_vm.busy || _vm.step === 1},on:{\"click\":_vm.clear}},[_vm._v(\" \"+_vm._s(_vm.t('driver.vcd.auth.actions.edit'))+\" \")]),(_vm.error)?_c('Banner',{staticClass:\"mt-20\",attrs:{\"color\":\"error\"}},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e(),(_vm.errorAllowHost)?_c('Banner',{staticClass:\"allow-list-error\",attrs:{\"color\":\"error\"}},[_c('div',[_vm._v(\" \"+_vm._s(_vm.t('driver.vcd.auth.errors.notAllowed', { hostname: _vm.hostname }))+\" \")]),_c('button',{staticClass:\"btn ml-10 role-primary\",attrs:{\"disabled\":_vm.allowBusy},on:{\"click\":_vm.addHostToAllowList}},[_vm._v(\" \"+_vm._s(_vm.t('driver.vcd.auth.actions.addToAllowList'))+\" \")])]):_vm._e(),(_vm.vdcs)?_c('div',{staticClass:\"row mt-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"label-key\":\"driver.vcd.auth.fields.vdc\",\"options\":_vm.vdcOptions,\"searchable\":false},on:{\"input\":function($event){return _vm.value.setData('vdc', $event);}},model:{value:(_vm.vdc),callback:function ($$v) {_vm.vdc=$$v},expression:\"vdc\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"label-key\":\"driver.vcd.auth.fields.vapp\",\"options\":_vm.vappNamesOptions,\"searchable\":false},on:{\"input\":function($event){return _vm.value.setData('vappName', $event);}},model:{value:(_vm.vappName),callback:function ($$v) {_vm.vappName=$$v},expression:\"vappName\"}})],1)]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('button',{ref:\"btn\",staticClass:\"btn role-primary\",attrs:{\"disabled\":_vm.disabled,\"tab-index\":_vm.tabIndex,\"data-testid\":_vm.componentTestid + '-async-button'},on:{\"click\":_vm.clicked}},[(_vm.busy)?_c('i',{staticClass:\"icon icon-lg icon-spinner icon-spin\"}):_c('span',{staticClass:\"icon-spacer\"}),_c('span',[_vm._v(_vm._s(_vm.displayLabel))]),_c('span',{staticClass:\"icon-spacer\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from 'vue';\n\nexport type AsyncButtonCallback = (success: boolean) => void;\n\ninterface Data {\n  busy: boolean\n}\n\nexport default Vue.extend<Data, any, any, any>({\n  props: {\n    /**\n     * Mode maps to keys in asyncButton.* translations\n     */\n    label: {\n      type:    String,\n      default: undefined,\n    },\n    labelKey: {\n      type:    String,\n      default: undefined,\n    },\n    disabled: {\n      type:    Boolean,\n      default: false,\n    },\n    tabIndex: {\n      type:    Number,\n      default: null,\n    },\n\n    /**\n     * Inherited global identifier prefix for tests\n     * Define a term based on the parent component to avoid conflicts on multiple components\n     */\n    componentTestid: {\n      type:    String,\n      default: 'busy-button'\n    },\n\n    manual: {\n      type:    Boolean,\n      default: false,\n    },\n  },\n\n  data(): {busy: boolean} {\n    return { busy: false };\n  },\n\n  computed: {\n    displayLabel(): string {\n      if (this.labelKey) {\n        const t = this.$store.getters['i18n/t'];\n\n        return t(this.labelKey);\n      }\n\n      return this.label;\n    }\n  },\n\n  methods: {\n    clicked($event: MouseEvent) {\n      if ($event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n      }\n\n      if ( this.disabled ) {\n        return;\n      }\n\n      const cb: AsyncButtonCallback = () => {\n        this.busy = false;\n      };\n\n      this.$set(this, 'busy', true);\n\n      this.$emit('click', cb);\n    },\n\n    focus() {\n      (this.$refs.btn as HTMLElement).focus();\n    }\n  }\n});\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BusyButton.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--15-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--15-3!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BusyButton.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./BusyButton.vue?vue&type=template&id=0842832c&scoped=true\"\nimport script from \"./BusyButton.vue?vue&type=script&lang=ts\"\nexport * from \"./BusyButton.vue?vue&type=script&lang=ts\"\nimport style0 from \"./BusyButton.vue?vue&type=style&index=0&id=0842832c&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0842832c\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport Banner from '@components/Banner/Banner.vue';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { parse as parseUrl } from '@shell/utils/url';\nimport { _CREATE } from '@shell/config/query-params';\nimport BusyButton from '../components/BusyButton.vue';\nimport { Vcd } from '../vcd.ts';\n\nexport default {\n  components: {\n    Banner,\n    BusyButton,\n    LabeledInput,\n    LabeledSelect,\n  },\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    this.driver = await this.$store.dispatch('rancher/find', {\n      type: 'nodedriver',\n      id:   'vcd'\n    });\n  },\n\n  data() {\n    if (this.mode !== _CREATE) {\n      this.value.decodedData.username = this.value.annotations['vcd.cattle.io/username'];\n      this.value.decodedData.org = this.value.annotations['vcd.cattle.io/org'];\n      this.value.decodedData.href = this.value.annotations['vcd.cattle.io/href'];\n    }\n\n    return {\n      vdcs:           null,\n      vdc:            '',\n      vappNames:      null,\n      vappName:       '',\n      step:           1,\n      busy:           false,\n      errorAllowHost: false,\n      driver:         {},\n      allowBusy:      false,\n      error:          '',\n    };\n  },\n\n  computed: {\n    vdcOptions() {\n      const sorted = (this.vdcs || []).sort((a, b) => a.name.localeCompare(b.name));\n\n      return sorted.map((p) => {\n        return {\n          label: p.name,\n          value: p.name\n        };\n      });\n    },\n    vappNamesOptions() {\n      const sorted = (this.vappNames || []).sort((a, b) => a.name.localeCompare(b.name));\n      return sorted.map((p) => {\n        return {\n          label: p.name,\n          value: p.name\n        };\n      });\n    },\n\n    hostname() {\n      const u = parseUrl(this.value.decodedData.href);\n\n      return u?.host || '';\n    },\n\n    canAuthenticate() {\n      return !!this.value?.decodedData?.href &&\n        !!this.value?.decodedData?.org &&\n        !!this.value?.decodedData?.username &&\n        !!this.value?.decodedData?.password;\n    }\n  },\n\n  created() {\n    this.$emit('validationChanged', false);\n  },\n\n  methods: {\n    // TODO: Validate that we can get a token for the vdc that the user has selected\n    test() {\n      // In the cluster creation flow, annotations is not set, so ensure it is set first\n      this.value.annotations = this.value.annotations || {};\n\n      this.value.annotations['vcd.cattle.io/username'] = this.value.decodedData.username;\n      this.value.annotations['vcd.cattle.io/org'] = this.value.decodedData.org;\n      this.value.annotations['vcd.cattle.io/href'] = this.value.decodedData.href;\n\n      if (this.vdc !== '') {\n        this.value.annotations['vcd.cattle.io/vdc'] = this.vdc;\n      }\n\n      if (this.vappName !== '') {\n        this.value.annotations['vcd.cattle.io/vappName'] = this.vappName;\n      }\n\n      return true;\n    },\n\n    // When the user clicked 'Edit Auth Config', clear the projects and set the step back to 1\n    // so the user can modify the credentials needed to fetch the projects\n    clear() {\n      this.$set(this, 'step', 1);\n      this.$set(this, 'vdcs', null);\n      this.$set(this, 'vappNames', null);\n      this.$set(this, 'errorAllowHost', false);\n\n      // Tell parent that the form is not invalid\n      this.$emit('validationChanged', false);\n    },\n\n    hostInAllowList() {\n      if (!this.driver?.whitelistDomains) {\n        return false;\n      }\n\n      const u = parseUrl(this.value.decodedData.href);\n\n      if (!u.host) {\n        return true;\n      }\n\n      return (this.driver?.whitelistDomains || []).includes(u.host);\n    },\n\n    async addHostToAllowList() {\n      this.$set(this, 'allowBusy', true);\n      const u = parseUrl(this.value.decodedData.href);\n\n      this.driver.whitelistDomains = this.driver.whitelistDomains || [];\n\n      if (!this.hostInAllowList()) {\n        this.driver.whitelistDomains.push(u.host);\n      }\n\n      try {\n        await this.driver.save();\n\n        this.$refs.connect.$el.click();\n      } catch (e) {\n        console.error('Could not update driver', e); // eslint-disable-line no-console\n        this.$set(this, 'allowBusy', false);\n      }\n    },\n\n    async connect(cb) {\n      this.$set(this, 'error', '');\n      this.$set(this, 'errorAllowHost', false);\n\n      let okay = false;\n\n      if (!this.value.decodedData.href) {\n        return cb(okay);\n      }\n\n      const vcd = new Vcd(this.$store, {\n        href:       this.value.decodedData.href,\n        org:        this.value.decodedData.org,\n        username:   this.value.decodedData.username,\n        password:   this.value.decodedData.password,\n      });\n\n      this.$set(this, 'allowBusy', false);\n      this.$set(this, 'step', 2);\n      this.$set(this, 'busy', true);\n\n      const res = await vcd.getToken();\n\n      if (res.error) {\n        console.error(res.error); // eslint-disable-line no-console\n        okay = false;\n\n        this.$set(this, 'step', 1);\n        this.$set(this, 'vdcs', null);\n\n        if (res.error._status === 502 && !this.hostInAllowList()) {\n          this.$set(this, 'errorAllowHost', true);\n        } else {\n          if (res.error._status === 502) {\n            // Still got 502, even with URL in the allow list\n            this.$set(this, 'error', this.t('driver.vcd.auth.errors.badGateway'));\n          } else if (res.error._status === 401) {\n            this.$set(this, 'error', this.t('driver.vcd.auth.errors.unauthorized'));\n          } else {\n            // Generic error\n            this.$set(this, 'error', res.error.message || this.t('driver.vcd.auth.errors.other'));\n          }\n        }\n      } else {\n        const vdcs = await vcd.getVdcs();\n\n        if (!vdcs.error) {\n          this.$set(this, 'vdcs', vdcs);\n          okay = true;\n        } else {\n          this.$set(this, 'error', vdcs.error.message);\n          okay = false;\n        }\n        const vappNames = await vcd.getVApps();\n        if (!vappNames.error) {\n          this.$set(this, 'vappNames', vappNames);\n          okay = true;\n        } else {\n          this.$set(this, 'error', vappNames.error.message);\n          okay = false;\n        }\n      }\n      this.$set(this, 'busy', false);\n      this.$set(this, 'vdc', this.vdcOptions[0]?.value);\n      this.$set(this, 'vappName', this.vappNamesOptions[0]?.value);\n      this.$emit('validationChanged', okay);\n\n      cb(okay);\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.href\"\n          :disabled=\"step !== 1\"\n          label-key=\"driver.vcd.auth.fields.href\"\n          placeholder-key=\"driver.vcd.auth.placeholders.href\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"value.setData('href', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.org\"\n          :disabled=\"step !== 1\"\n          label-key=\"driver.vcd.auth.fields.org\"\n          placeholder-key=\"driver.vcd.auth.placeholders.org\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"value.setData('org', $event);\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.username\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.vcd.auth.fields.username\"\n          placeholder-key=\"driver.vcd.auth.placeholders.username\"\n          type=\"text\"\n          :mode=\"mode\"\n          @input=\"value.setData('username', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.password\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.vcd.auth.fields.password\"\n          placeholder-key=\"driver.vcd.auth.placeholders.password\"\n          type=\"password\"\n          :mode=\"mode\"\n          @input=\"value.setData('password', $event);\"\n        />\n      </div>\n    </div>\n\n    <BusyButton\n      ref=\"connect\"\n      label-key=\"driver.vcd.auth.actions.authenticate\"\n      :disabled=\"step !== 1 || !canAuthenticate\"\n      class=\"mt-20\"\n      @click=\"connect\"\n    />\n\n    <button\n      class=\"btn role-primary mt-20 ml-20\"\n      :disabled=\"busy || step === 1\"\n      @click=\"clear\"\n    >\n      {{ t('driver.vcd.auth.actions.edit') }}\n    </button>\n\n    <Banner\n      v-if=\"error\"\n      class=\"mt-20\"\n      color=\"error\"\n    >\n      {{ error }}\n    </Banner>\n\n    <Banner\n      v-if=\"errorAllowHost\"\n      color=\"error\"\n      class=\"allow-list-error\"\n    >\n      <div>\n        {{ t('driver.vcd.auth.errors.notAllowed', { hostname }) }}\n      </div>\n      <button\n        :disabled=\"allowBusy\"\n        class=\"btn ml-10 role-primary\"\n        @click=\"addHostToAllowList\"\n      >\n        {{ t('driver.vcd.auth.actions.addToAllowList') }}\n      </button>\n    </Banner>\n    <div\n      v-if=\"vdcs\"\n      class=\"row mt-20\"\n    >\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"vdc\"\n          label-key=\"driver.vcd.auth.fields.vdc\"\n          :options=\"vdcOptions\"\n          :searchable=\"false\"\n          @input=\"value.setData('vdc', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"vappName\"\n          label-key=\"driver.vcd.auth.fields.vapp\"\n          :options=\"vappNamesOptions\"\n          :searchable=\"false\"\n          @input=\"value.setData('vappName', $event);\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n  .allow-list-error {\n    display: flex;\n\n    > :first-child {\n      flex: 1;\n    }\n  }\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./vcd.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./vcd.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./vcd.vue?vue&type=template&id=650d9e53&scoped=true\"\nimport script from \"./vcd.vue?vue&type=script&lang=js\"\nexport * from \"./vcd.vue?vue&type=script&lang=js\"\nimport style0 from \"./vcd.vue?vue&type=style&index=0&id=650d9e53&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"650d9e53\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".allow-list-error[data-v-650d9e53]{display:flex}.allow-list-error[data-v-650d9e53]>:first-child{flex:1}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./BusyButton.vue?vue&type=style&index=0&id=0842832c&prod&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./vcd.vue?vue&type=style&index=0&id=650d9e53&prod&lang=scss&scoped=true\""],"sourceRoot":""}